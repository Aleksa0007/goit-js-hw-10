{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst datePickerInput = document.querySelector(`#datetime-picker`);\nconst buttonElement = document.querySelector(\"button[data-start]\");\n\nconst daysElement = document.querySelector(\"span[data-days]\");\nconst hoursElement = document.querySelector(\"span[data-hours]\");\nconst minutesElement = document.querySelector(\"span[data-minutes]\");\nconst secondsElement = document.querySelector(\"span[data-seconds]\");\n\nlet userSelectedDate;\nlet intervalId = null;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    \n    onClose (selectedDates) {\n  \n      userSelectedDate = selectedDates[0];\n      let currentDate = new Date();\n      const isPastDate = userSelectedDate <= currentDate;\n      buttonElement.disabled = isPastDate;\n    \n      if(isPastDate){\n        iziToast.error({\n            title: \"Error\",\n            message: \"Please choose a date in the future\"\n        });\n      }\n    },\n};\n\nwindow.addEventListener(\"load\", (event) => {\n    buttonElement.disabled = true;\n    console.log(\"page is fully loaded\");\n});\n\nflatpickr(datePickerInput, options);\n\nbuttonElement.addEventListener(\"click\", startButtonClick);\n\nfunction startButtonClick(event) {\n    buttonElement.disabled = true;\n    datePickerInput.disabled = true;\n\n    startTimer().then( () => {\n        datePickerInput.disabled = false;\n        clearTimeout(intervalId);\n    })\n \n};\n\nfunction startTimer() {\n\n    return new Promise ((resolve) => {\n        intervalId = setInterval(() => {\n        \n            const remainingTime = userSelectedDate - Date.now();\n    \n            if(remainingTime <= 0){\n               resolve();\n               return;\n            }\n            const formattedDateTime = convertMs(remainingTime);\n            // console.log(formattedDateTime);test\n            updateUIClock(formattedDateTime);\n            \n        }, 1000)\n    })\n}\n\nfunction updateUIClock({ days, hours, minutes, seconds }){\n    daysElement.textContent = pad(days);\n    hoursElement.textContent = pad(hours);\n    minutesElement.textContent = pad(minutes);\n    secondsElement.textContent = pad(seconds);\n};\n\nfunction pad(value) { \n    return String(value).padStart(2, `0`);\n}\n\nfunction convertMs(ms) {\n\n   const second = 1000;\n   const minute = second * 60;\n   const hour = minute * 60;\n   const day = hour * 24;\n \n   const days = Math.floor(ms / day);\n   const hours = Math.floor((ms % day) / hour);\n   const minutes = Math.floor((ms % day % hour) / minute);\n   const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n \n   return { days, hours, minutes, seconds };\n }"],"names":["datePickerInput","buttonElement","daysElement","hoursElement","minutesElement","secondsElement","userSelectedDate","intervalId","options","selectedDates","isPastDate","iziToast","event","flatpickr","startButtonClick","startTimer","resolve","remainingTime","formattedDateTime","convertMs","updateUIClock","days","hours","minutes","seconds","pad","value","ms"],"mappings":"2IAKA,MAAMA,EAAkB,SAAS,cAAc,kBAAkB,EAC3DC,EAAgB,SAAS,cAAc,oBAAoB,EAE3DC,EAAc,SAAS,cAAc,iBAAiB,EACtDC,EAAe,SAAS,cAAc,kBAAkB,EACxDC,EAAiB,SAAS,cAAc,oBAAoB,EAC5DC,EAAiB,SAAS,cAAc,oBAAoB,EAElE,IAAIC,EACAC,EAAa,KAEjB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAASC,EAAe,CAEtBH,EAAmBG,EAAc,CAAC,EAElC,MAAMC,EAAaJ,GADD,IAAI,KAEtBL,EAAc,SAAWS,EAEtBA,GACDC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCACrB,CAAS,CAEJ,CACL,EAEA,OAAO,iBAAiB,OAASC,GAAU,CACvCX,EAAc,SAAW,GACzB,QAAQ,IAAI,sBAAsB,CACtC,CAAC,EAEDY,EAAUb,EAAiBQ,CAAO,EAElCP,EAAc,iBAAiB,QAASa,CAAgB,EAExD,SAASA,EAAiBF,EAAO,CAC7BX,EAAc,SAAW,GACzBD,EAAgB,SAAW,GAE3Be,EAAU,EAAG,KAAM,IAAM,CACrBf,EAAgB,SAAW,GAC3B,aAAaO,CAAU,CAC/B,CAAK,CAEL,CAEA,SAASQ,GAAa,CAElB,OAAO,IAAI,QAAUC,GAAY,CAC7BT,EAAa,YAAY,IAAM,CAE3B,MAAMU,EAAgBX,EAAmB,KAAK,IAAG,EAEjD,GAAGW,GAAiB,EAAE,CACnBD,IACA,MACF,CACD,MAAME,EAAoBC,EAAUF,CAAa,EAEjDG,EAAcF,CAAiB,CAElC,EAAE,GAAI,CACf,CAAK,CACL,CAEA,SAASE,EAAc,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CACrDtB,EAAY,YAAcuB,EAAIJ,CAAI,EAClClB,EAAa,YAAcsB,EAAIH,CAAK,EACpClB,EAAe,YAAcqB,EAAIF,CAAO,EACxClB,EAAe,YAAcoB,EAAID,CAAO,CAC5C,CAEA,SAASC,EAAIC,EAAO,CAChB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASP,EAAUQ,EAAI,CAOpB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAC1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EACpCJ,EAAU,KAAK,MAAOI,EAAK,MAAM,KAAQ,GAAM,EAC/CH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC"}